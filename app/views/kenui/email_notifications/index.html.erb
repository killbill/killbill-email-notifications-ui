<div class="kaui-container email-notifications-index">
  <%= render partial: 'kaui/components/breadcrumb/breadcrumb', locals: {
    breadcrumbs: [
      { label: 'Settings', href: '/' },
      { label: "E-notifications", href: '#' }
    ]
  } %>

  <div class="d-flex" style="gap: 4rem;">
    <%= render :template => 'kaui/layouts/kaui_setting_sidebar' %>

    <div class="e-notifications-details w-100">
      <div class="d-flex flex-column">
        <div class="e-notifications-details-header">
          <h2>E-notifications</h2>
          <span>
          </span>
        </div>

        <table id="accounts-table" class="">
          <thead>
          <tr>
            <th>Name</th>
            <th>ID</th>
            <th>Events</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          </tbody>
        </table>

        <%= render :partial => 'configure_events_modal' %>
      </div>
    </div>
  </div>
</div>

<%= javascript_tag do %>
    $(document).ready(function() {
      var table = $('#accounts-table').DataTable({
        "pagingType": "simple",
        "language": {
            "info": "Showing _START_ to _END_ of _TOTAL_ entries"
        },
        "pageLength": 50,
        "displayStart": 0,
        "order": [[ 0, "asc" ]],
        "ordering": false,
        "processing": true,
        "serverSide": true,
        "search": {"search": null},
        "ajax": "<%= email_notification_pagination_path(:record_total => @record_total, :format => :json) %>",
        "columnDefs": [
            { className: "event-class", "targets": [ 2 ] }
        ]
      });

    });
<% end %>
